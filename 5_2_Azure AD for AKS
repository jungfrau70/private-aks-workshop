az login --tenant jupyteronlinegmail.onmicrosoft.com

```bash

SUBSCRIPTION_ID=$(az account show --query id --output tsv)
az account set --subscription $SUBSCRIPTION_ID
LOCATION="koreacentral"

echo "SUBSCRIPTION_ID: $SUBSCRIPTION_ID" 
echo "LOCATION: $LOCATION"

# Hub VNet
HUB_VNET_NAME=Hub_VNET
FW_SUBNET_NAME=AzureFirewallSubnet
BASTION_SUBNET_NAME=AzureBastionSubnet
HUB_VNET_PREFIX=10.0.0.0/22 # IP address range of the Virtual network (VNet).
BASTION_SUBNET_PREFIX=10.0.0.128/26 # IP address range of the Bastion subnet 
FW_SUBNET_PREFIX=10.0.0.0/26 # IP address range of the Firewall subnet
JUMPBOX_SUBNET_PREFIX=10.0.0.64/26 # IP address range of the Jumpbox subnet

# Spoke VNet
SPOKE_VNET_NAME=Spoke_VNET
JUMPBOX_SUBNET_NAME=JumpboxSubnet
ENDPOINTS_SUBNET_NAME=endpoints-subnet
APPGW_SUBNET_NAME=app-gw-subnet
AKS_SUBNET_NAME=aks-subnet
LOADBALANCER_SUBNET_NAME=loadbalancer-subnet
SPOKE_VNET_PREFIX=10.1.0.0/22 # IP address range of the Virtual network (VNet).
AKS_SUBNET_PREFIX=10.1.0.0/24 # IP address range of the AKS subnet
LOADBALANCER_SUBNET_PREFIX=10.1.1.0/28 # IP address range of the Loadbalancer subnet
APPGW_SUBNET_PREFIX=10.1.2.0/24 # IP address range of the Application Gateway subnet
ENDPOINTS_SUBNET_PREFIX=10.1.1.16/28 # IP address range of the Endpoints subnet

# Infrastructure
HUB_RG=rg-hub
SPOKE_RG=rg-spoke
LOCATION=koreacentral 
BASTION_NSG_NAME=Bastion_NSG
JUMPBOX_NSG_NAME=Jumpbox_NSG
AKS_NSG_NAME=Aks_NSG
ENDPOINTS_NSG_NAME=Endpoints_NSG
LOADBALANCER_NSG_NAME=Loadbalancer_NSG
APPGW_NSG=Appgw_NSG
FW_NAME=azure-firewall
APPGW_NAME=AppGateway
ROUTE_TABLE_NAME=spoke-rt
AKS_IDENTITY_NAME=aks-msi
JUMPBOX_VM_NAME=Jumpbox-VM
AKS_CLUSTER_NAME=private-aks
ACR_NAME="aksacr$RANDOM"
STUDENT_NAME=ian # don't use spaces

# ê° ê·¸ë£¹ì˜ Object ID ê°€ì ¸ì˜¤ê¸°
OPERATOR_GROUP_OBJECT_ID=$(az ad group show --group aks-operators --query id --output tsv)
ADMIN_GROUP_OBJECT_ID=$(az ad group show --group aks-admins --query id --output tsv)
CLUSTER_ADMIN_GROUP_OBJECT_ID=$(az ad group show --group aks-cluster-admins --query id --output tsv)
DEVELOPER_GROUP_OBJECT_ID=$(az ad group show --group aks-developers --query id --output tsv)

# ê° ì‚¬ìš©ìì˜ Object ID ê°€ì ¸ì˜¤ê¸°
OPERATOR_OBJECT_ID=$(az ad user show --id operator@jupyteronlinegmail.onmicrosoft.com --query id --output tsv)
ADMIN_OBJECT_ID=$(az ad user show --id admin@jupyteronlinegmail.onmicrosoft.com --query id --output tsv)
CLUSTER_ADMIN_OBJECT_ID=$(az ad user show --id clusteradmin@jupyteronlinegmail.onmicrosoft.com --query id --output tsv)
DEVELOPER_OBJECT_ID=$(az ad user show --id developer@jupyteronlinegmail.onmicrosoft.com --query id --output tsv)

echo "ğŸ”¹ ê·¸ë£¹ ì •ë³´:"
echo "   - ì˜¤í¼ë ˆì´í„°: $OPERATOR_GROUP_OBJECT_ID"
echo "   - ê´€ë¦¬ì: $ADMIN_GROUP_OBJECT_ID"
echo "   - í´ëŸ¬ìŠ¤í„° ê´€ë¦¬ì: $CLUSTER_ADMIN_GROUP_OBJECT_ID"
echo "   - ê°œë°œì: $DEVELOPER_GROUP_OBJECT_ID"

echo "ğŸ”¹ ì‚¬ìš©ì ì •ë³´:"
echo "   - ì˜¤í¼ë ˆì´í„°: $OPERATOR_OBJECT_ID"
echo "   - ê´€ë¦¬ì: $ADMIN_OBJECT_ID"
echo "   - í´ëŸ¬ìŠ¤í„° ê´€ë¦¬ì: $CLUSTER_ADMIN_OBJECT_ID"
echo "   - ê°œë°œì: $DEVELOPER_OBJECT_ID"


### **ì‚¬ìš©ì ê·¸ë£¹ë³„ í•„ìš” ê¶Œí•œ**
| ì‚¬ìš©ì ê·¸ë£¹ | í•„ìš” ì—­í•  |
|------------|----------|
| **í´ëŸ¬ìŠ¤í„° ì‚¬ìš©ì (kubectl ì‚¬ìš© ê°€ëŠ¥)** | `Azure Kubernetes Service Cluster User Role` |
| **í´ëŸ¬ìŠ¤í„° ê´€ë¦¬ì (kubectl + AKS ê´€ë¦¬ ê°€ëŠ¥)** | `Azure Kubernetes Service Cluster Admin Role` |
| **AKS ë¦¬ì†ŒìŠ¤ ê´€ë¦¬ì (Azure Portal/CLIë¡œ AKS ê´€ë¦¬)** | `Contributor` ë˜ëŠ” `Azure Kubernetes Service Contributor Role` |
- **í´ëŸ¬ìŠ¤í„° ê´€ë¦¬ì**(kubectl + ê´€ë¦¬ ì‘ì—… ê°€ëŠ¥)ë‚˜ **AKS ê´€ë¦¬ ì‘ì—…ì„ ìˆ˜í–‰í•  ì‚¬ìš©ì**ëŠ” ì¶”ê°€ì ì¸ ì—­í• (`Admin Role`, `Contributor Role` ë“±)ì´ í•„ìš”  


## í´ëŸ¬ìŠ¤í„° ì‚¬ìš©ì (kubectl ì‚¬ìš© ê°€ëŠ¥) - aks-operators ê·¸ë£¹ì— ë¶€ì—¬
az role assignment create --assignee $OPERATOR_GROUP_OBJECT_ID \
    --role "Azure Kubernetes Service RBAC Reader" \
    --scope /subscriptions/$SUBSCRIPTION_ID/resourceGroups/$SPOKE_RG/providers/Microsoft.ContainerService/managedClusters/$AKS_CLUSTER_NAME

## í´ëŸ¬ìŠ¤í„° ê´€ë¦¬ì (kubectl + AKS ê´€ë¦¬ ê°€ëŠ¥) - aks-cluster-admins ê·¸ë£¹ì— ë¶€ì—¬
az role assignment create --assignee $CLUSTER_ADMIN_GROUP_OBJECT_ID \
    --role "Azure Kubernetes Service RBAC Admin" \
    --scope /subscriptions/$SUBSCRIPTION_ID/resourceGroups/$SPOKE_RG/providers/Microsoft.ContainerService/managedClusters/$AKS_CLUSTER_NAME

## AKS ë¦¬ì†ŒìŠ¤ ê´€ë¦¬ì (Azure Portal/CLIë¡œ AKS ê´€ë¦¬) - aks-admins ê·¸ë£¹ì— ë¶€ì—¬
az role assignment create --assignee $ADMIN_GROUP_OBJECT_ID \
    --role "Azure Kubernetes Service RBAC Cluster Admin" \
    --scope /subscriptions/$SUBSCRIPTION_ID/resourceGroups/$SPOKE_RG

## ê°œë°œì ê·¸ë£¹ - í•„ìš”ì— ë”°ë¼ ì¶”ê°€ ê°€ëŠ¥
az role assignment create --assignee $DEVELOPER_GROUP_OBJECT_ID \
    --role "Azure Kubernetes Service RBAC Reader" \
    --scope /subscriptions/$SUBSCRIPTION_ID/resourceGroups/$SPOKE_RG/providers/Microsoft.ContainerService/managedClusters/$AKS_CLUSTER_NAME


# ê¶Œí•œ í™•ì¸
az role assignment list --assignee $OPERATOR_GROUP_OBJECT_ID --all --output table
az role assignment list --assignee $CLUSTER_ADMIN_GROUP_OBJECT_ID --all --output table
az role assignment list --assignee $ADMIN_GROUP_OBJECT_ID --all --output table
az role assignment list --assignee $DEVELOPER_GROUP_OBJECT_ID --all --output table


```



###






















############################################################################################################
1. **ì˜¤í¼ë ˆì´í„°ì—ê²Œ AKS ì ‘ê·¼ ê¶Œí•œ ë¶€ì—¬**  
   ```bash
   az role assignment create \
     --assignee $OPERATOR_OBJECT_ID \
     --role "Azure Kubernetes Service Cluster User Role" \
     --scope /subscriptions/$SUBSCRIPTION_ID/resourceGroups/$RESOURCE_GROUP_1/providers/Microsoft.ContainerService/managedClusters/$AKS_CLUSTER_NAME_1

   az role assignment create \
     --assignee $OPERATOR_OBJECT_ID \
     --role "Azure Kubernetes Service Cluster User Role" \
     --scope /subscriptions/$SUBSCRIPTION_ID/resourceGroups/$RESOURCE_GROUP_2/providers/Microsoft.ContainerService/managedClusters/$AKS_CLUSTER_NAME_2
   az role assignment list --assignee $OPERATOR_OBJECT_ID --output table

   ```
   - `<OPERATOR_AZURE_AD_OBJECT_ID>`: ì˜¤í¼ë ˆì´í„°ì˜ Azure AD Object ID  
   - `<SUBSCRIPTION_ID>`: í˜„ì¬ ì‚¬ìš© ì¤‘ì¸ Azure êµ¬ë… ID  


---

2. **ê´€ë¦¬ìì—ê²Œ AKS ì ‘ê·¼ ê¶Œí•œ ë¶€ì—¬**  
   ```bash
   az role assignment create \
     --assignee $ADMIN_OBJECT_ID \
     --role "Azure Kubernetes Service Cluster Admin Role" \
     --scope /subscriptions/$SUBSCRIPTION_ID/resourceGroups/$RESOURCE_GROUP_1/providers/Microsoft.ContainerService/managedClusters/$AKS_CLUSTER_NAME_1

   az role assignment create \
     --assignee $ADMIN_OBJECT_ID \
     --role "Azure Kubernetes Service Cluster Admin Role" \
     --scope /subscriptions/$SUBSCRIPTION_ID/resourceGroups/$RESOURCE_GROUP_2/providers/Microsoft.ContainerService/managedClusters/$AKS_CLUSTER_NAME_2
   
   az role assignment list --assignee $ADMIN_OBJECT_ID --output table

   ```

3. **í´ëŸ¬ìŠ¤í„° ê´€ë¦¬ìì—ê²Œ AKS ì ‘ê·¼ ê¶Œí•œ ë¶€ì—¬**  
   ```bash
   az role assignment create \
     --assignee $CLUSTER_ADMIN_OBJECT_ID \
     --role "Azure Kubernetes Service Cluster Admin Role" \
     --scope /subscriptions/$SUBSCRIPTION_ID/resourceGroups/$RESOURCE_GROUP_1/providers/Microsoft.ContainerService/managedClusters/$AKS_CLUSTER_NAME_1
   
   az role assignment create \
     --assignee $CLUSTER_ADMIN_OBJECT_ID \
     --role "Azure Kubernetes Service Cluster Admin Role" \
     --scope /subscriptions/$SUBSCRIPTION_ID/resourceGroups/$RESOURCE_GROUP_2/providers/Microsoft.ContainerService/managedClusters/$AKS_CLUSTER_NAME_2
   
   az role assignment list --assignee $CLUSTER_ADMIN_OBJECT_ID --output table

   ```

### **ê° ì—­í•  ë¹„êµ (ì •ë¦¬)**  

| ì—­í•  | ì„¤ëª… | `kubectl` ì‚¬ìš© | AKS ê´€ë¦¬ ê°€ëŠ¥ (Azure Portal/CLI) |
|------|------|---------------|--------------------------------|
| **Azure Kubernetes Service Cluster User Role** | í´ëŸ¬ìŠ¤í„° ì‚¬ìš©ì ì—­í• , `kubectl` ì‚¬ìš© ê°€ëŠ¥ (RBAC í•„ìš”) | âœ… ê°€ëŠ¥ | âŒ ë¶ˆê°€ëŠ¥ |
| **Azure Kubernetes Service Cluster Admin Role** | í´ëŸ¬ìŠ¤í„° ê´€ë¦¬ì ì—­í• , `kubectl` ì „ì²´ ê¶Œí•œ (RBAC í•„ìš”) | âœ… ê°€ëŠ¥ | âŒ ë¶ˆê°€ëŠ¥ |
| **Azure Kubernetes Service Contributor Role** | AKS í´ëŸ¬ìŠ¤í„° ìì²´ ê´€ë¦¬ ê°€ëŠ¥ (ìƒì„±, ìˆ˜ì •, ì‚­ì œ ë“±) | âŒ ì§ì ‘ ë¶ˆê°€ | âœ… ê°€ëŠ¥ |
| **Contributor** | ë¦¬ì†ŒìŠ¤ ê·¸ë£¹ ë‚´ ëª¨ë“  ë¦¬ì†ŒìŠ¤ ê´€ë¦¬ ê°€ëŠ¥ (AKS í¬í•¨) | âŒ ì§ì ‘ ë¶ˆê°€ | âœ… ê°€ëŠ¥ |

### **ì£¼ìš” ì°¨ì´ì **
- `"Azure Kubernetes Service Cluster User Role"`ì€ **`kubectl` ì‚¬ìš©ì„ ìœ„í•œ ìµœì†Œí•œì˜ ê¶Œí•œ**ë§Œ ì œê³µí•˜ì§€ë§Œ,  
  - AKS ìì²´ë¥¼ ê´€ë¦¬í•  ìˆ˜ëŠ” ì—†ìŒ (ì˜ˆ: í´ëŸ¬ìŠ¤í„° ì—…ê·¸ë ˆì´ë“œ, ë…¸ë“œ í’€ ì¡°ì • ë“± ë¶ˆê°€)  
- `"Azure Kubernetes Service Cluster Admin Role"`ì€ **í´ëŸ¬ìŠ¤í„° ë‚´ ëª¨ë“  ê¶Œí•œì„ ê°€ì§**  
- `"Azure Kubernetes Service Contributor Role"`ì€ **AKS í´ëŸ¬ìŠ¤í„°ë¥¼ ìƒì„±, ìˆ˜ì •, ì‚­ì œí•  ìˆ˜ ìˆì§€ë§Œ `kubectl`ì„ ë°”ë¡œ ì‚¬ìš©í•  ìˆ˜ëŠ” ì—†ìŒ**  
- `"Contributor"`ëŠ” **ë¦¬ì†ŒìŠ¤ ê·¸ë£¹ ë‚´ ëª¨ë“  ë¦¬ì†ŒìŠ¤ë¥¼ ê´€ë¦¬ ê°€ëŠ¥** (`AKS ê´€ë¦¬ í¬í•¨`)  

---

### **ê²°ë¡ **
ğŸ‘‰ **"Azure Kubernetes Service Cluster User Role"ì€ kubectl ì‚¬ìš©ì´ ëª©ì ì´ê³ , AKS í´ëŸ¬ìŠ¤í„° ìì²´ë¥¼ ê´€ë¦¬í•˜ë ¤ë©´ ì¶”ê°€ì ì¸ ì—­í• (`Admin Role`, `Contributor Role` ë“±)ì´ í•„ìš”í•˜ë‹¤"**ëŠ” ì˜ë¯¸


###